define(["tfAlert","http://res.wx.qq.com/open/js/jweixin-1.0.0.js"],function(require,exports,module){function a(a,b,d){"0"==a.status&&(e.config({debug:!1,appId:a.appid,timestamp:a.timestamp,nonceStr:a.nonceStr,signature:a.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),e.ready(function(){b&&e.hideOptionMenu(),d&&d()}),e.error(function(a){e.hideOptionMenu(),c(JSON.stringify(a),"错误提示","确定")}))}var b=require("tfAlert"),c=b.tfAlert,d={},e=require("http://res.wx.qq.com/open/js/jweixin-1.0.0.js");d.ready=function(b,d,e){$.ajax({url:sys.getBaseUrl()+"weChat/weiTingGetTicket.do",data:{url:window.location.href.split("#")[0]},type:"post",async:!0,cache:!1,timeout:6e4,dataType:"json",success:function(e){"0"!=e.status&&c(e.error+"["+e.status+"]","错误提示","确定");var f=e;a(f,d,b)},error:function(a,b,d){c("wechat signature exception happened","错误提示","确定")}})},exports.weChatShare=d});