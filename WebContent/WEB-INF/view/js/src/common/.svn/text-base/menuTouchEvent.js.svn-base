define(function(require,exports,module){function a(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function b(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)}var c=window.navigator.userAgent,d="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},e=function(a){this.moveObj=null,this.moveObj_width=0,this.startPos={x:0,y:0},this.endPos={x:0,y:0},this.movePos={x:0,y:0},this.offset={x:0,y:0,time:0},this.startFuncion=null,this.endFunction=null,this.moveFunction=null,this.bindMove=this.bindFunction(this,this.eventMouseMove),this.bindUp=this.bindFunction(this,this.eventMouseUp),this.documentTouchStart=this.bindFunction(this,this.eventDocumentTouchStart),this.init(a)};e.prototype.MOUSEUP="mouseup",e.prototype.MOUSEDOWN="mousedown",e.prototype.MOUSEMOVE="mousemove",e.prototype.init=function(a){/ipad|iphone|android/.test(c.toLowerCase())&&(this.MOUSEUP="touchend",this.MOUSEDOWN="touchstart",this.MOUSEMOVE="touchmove");var a=a;"undefined"!=typeof a.start&&this.isFc(a.start)&&(this.startFuncion=a.start),"undefined"!=typeof a.end&&this.isFc(a.end)&&(this.endFunction=a.end),"undefined"!=typeof a.move&&this.isFc(a.move)&&(this.moveFunction=a.move);var b=d(a.id)?a.id:document.getElementById(a.id);b&&this.bindElemEvent(b)},e.prototype.getPos=function(a){try{return console.log(a.pageX),{x:"undefined"!=typeof a.changedTouches?a.changedTouches[0].pageX:a.pageX,y:a.changedTouches[0].pageY||a.pageY}}catch(a){return this.movePos}},e.prototype.isFc=function(a){return"function"==typeof a?!0:!1},e.prototype.bindElemEvent=function(b){var c=this;a(b,c.MOUSEDOWN,function(b){var d=b;c.startTime=(new Date).getTime(),c.endPos.x=c.startPos.x="undefined"!=typeof d.changedTouches?d.changedTouches[0].pageX:d.pageX,c.endPos.y=c.startPos.y="undefined"!=typeof d.changedTouches?d.changedTouches[0].pageY:d.pageY,c.offset={x:c.endPos.x-c.startPos.x,y:c.endPos.y-c.startPos.y,time:c.startTime},c.startFuncion(c.startPos,b),a(document,c.MOUSEMOVE,c.bindMove),a(document,c.MOUSEUP,c.bindUp),a(document,"touchcancel",c.bindUp)})},e.prototype.eventMouseMove=function(a){var b=a,c=this;c.endPos.x=c.movePos.x="undefined"!=typeof b.changedTouches?b.changedTouches[0].pageX:b.pageX,c.endPos.y=c.movePos.y="undefined"!=typeof b.changedTouches?b.changedTouches[0].pageY:b.pageY,this.offset={x:c.movePos.x-c.startPos.x,y:c.movePos.y-c.startPos.y,time:(new Date).getTime()-c.startTime};c.moveFunction(c.movePos,a)},e.prototype.eventMouseUp=function(a){var c=a,d=this;d.endPos.x="undefined"!=typeof c.changedTouches?c.changedTouches[0].pageX:c.pageX,d.endPos.y="undefined"!=typeof c.changedTouches?c.changedTouches[0].pageY:c.pageY,d.endFunction(d.endPos,a),b(document,d.MOUSEMOVE,d.bindMove),b(document,d.MOUSEUP,d.bindUp),b(document,"touchcancel",d.bindUp)},e.prototype.eventDocumentTouchStart=function(a){var b=a;b.stopPropagation(),b.preventDefault()},e.prototype.bindFunction=function(a,b){return function(){b.apply(a,arguments)}},exports.touch=e});