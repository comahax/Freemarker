define(["zepto"],function(require,exports,module){function a(a){for(var b=0,c=a[b],d=1,e=a.length;e>d;d++){var f=a[d];c>f&&(b=d,c=f)}return b}function b(a){for(var b=0,c=a[b],d=1,e=a.length;e>d;d++){var f=a[d];f>c&&(b=d,c=f)}return b}var c={};c.margin=10,c.pblResetParent=null,c.show=function(d,e,f){if(c.con=$(e),c.boxes=c.con.find(f),0!=c.boxes.length){c.boxWidth=c.boxes[0].offsetWidth,c.maxHeight=[];for(var g=[],h=d?d:640,i=parseInt(h/c.boxWidth),j=0==i?1:i,k=(h>=c.boxWidth?h-j*c.boxWidth:0,0),l=c.boxes.length;l>k;k++){if(j>k)g[k]=c.boxes[k].offsetHeight+c.margin,c.boxes[k].style.top=0,c.boxes[k].style.left=k*c.boxWidth+"px";else{var m=a(g),n=c.boxes[k].offsetHeight+c.margin;c.boxes[k].style.top=g[m]+"px",c.boxes[k].style.left=m*c.boxWidth+"px",g[m]+=n}c.con[0].style.height=g[b(g)]+"px"}}},c.bindTitleItems=function(){if(!c.isBind){$("body").on("click",".page-model-title",function(){$(this).toggleClass("active");var a=$(this).next();a.toggle();var b=a.children(".page-product-list");c.init(b)}),c.isBind=!0}},c.init=function(a){var b=this,d=b.pblResetParent=a||".page-product-list";itemWidth=$(window).width()>640?640:$(window).width(),$(d).each(function(){var a=this;b.show(itemWidth,a,".pd-items")}),c.bindTitleItems()},$(window).resize(function(){c.init(c.pblResetParent||null)}),exports.pbl=c});