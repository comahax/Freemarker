function getShareUrl(){$.ajax({url:common.getBaseUrl()+"redIndex/getShareUrl.do",type:"post",dataType:"json",async:!1,error:function(a){},success:function(a){"1"==a.status&&(ShareJson.title=a.SHARE_TITLE,ShareJson.link=a.SHARE_URL,ShareJson.imgUrl=common.getImgUrl()+"/fuliclient"+a.SHARE_IMG,ShareJson.desc=a.SHARE_CONT,sys.setCookie("ShareJson",JSON.stringify(ShareJson)))}})}function guanzhu(){common.G("http://mp.weixin.qq.com/s?__biz=MjM5MDE4NjI2NQ==&mid=411610586&idx=1&sn=93dbb0d74f31bb8fd8d0310342cff0ac#rd")}function dianJiLingQu(a,b){var c=$("#isRqifsub").val();if("0"==c){var d=a,e=$("#phoneText").val();""==e||null==e?($("#orderIdText").val(d),common.showLayer("#tips-box-con",1,1,function(){void 0!=b&&$(".inputPhone").eq(1).val(b),tempDataid=d,$(".tips-btn").click(function(){bangDingPhone(d)})},!0)):cashOrderRedPackage(d)}else common.tips("请先关注珠海移动公众号，才能参与活动！",function(){common.G("http://mp.weixin.qq.com/s?__biz=MjM5MDE4NjI2NQ==&mid=408342375&idx=1&sn=37d4be54fc5f5cc1e83457c203ff8393#rd")})}function getAccountAdvcycle(){$.ajax({url:common.getBaseUrl()+"redEnve/getAccountAdvcycle.do",type:"post",dataType:"json",error:function(a){},success:function(a){var b="";$.each(a.advcycle,function(a,c){b+='<div class="swiper-slide"><div class="banner pl-1em pr-1em"><a href="'+c.CYCLE_URL+'"><img src="'+common.getImgUrl()+"/fuliclient"+c.CYCLE_ADS+'"></a></div></div>'}),$("#swiper-wrapper").append(b);new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0,autoplay:3e3,loop:!0})}})}function show4GKTstate(){common.showLayer("#tips-box-con2",1,1,function(){},!0)}function bangDingPhone(a){var b=$(".inputPhone").eq(1).val();if(""==b||11!=b.length)return void common.tips("请输入正确的电话号码！");var c=$(".inputCheckCode").eq(1).val();if(""==c)return void common.tips("请输入验证码！");var d=$("#orderIdText").val(d);common.showLoad("正在加载..."),$.ajax({url:common.getBaseUrl()+"redEnve/bangDingPhone.do?inputPhone="+b+"&inputCheckCode="+c+"&orderId="+a,type:"post",dataType:"json",error:function(a){common.hideLoad(),common.tips("系统异常，请稍后再试")},success:function(a){common.hideLoad(),"1"==a.checkCodeStatus?"1"==a.status?common.G(common.getBaseUrl()+"new2016/index/userAccount.jsp"):common.tips("绑定号码成功但是兑换失败："+a.msgs,function(){common.G(common.getBaseUrl()+"new2016/index/userAccount.jsp")}):"2"==a.checkCodeStatus&&common.tips(a.msgs)}})}function getCode(){var a=$(".inputPhone").eq(1).val();return""==a||11!=a.length?void common.tips("请输入正确的电话号码！"):(common.showLoad("正在加载..."),void $.ajax({url:common.getBaseUrl()+"redEnve/getYanzhengCode.do?inputPhone="+a,type:"post",asyne:!0,dataType:"json",error:function(a){},success:function(b){common.hideLoad(),"1"==b.status?common.tips("不是珠海号码！",function(){dianJiLingQu(tempDataid,a)}):"0"==b.status?common.tips("验证码已下发，请不要重复申请！",function(){dianJiLingQu(tempDataid,a)}):"4"==b.status?common.tips("系统繁忙，请稍后再试。"):"2"==b.status&&common.tips("验证码已下发，请不要重复申请！",function(){dianJiLingQu(tempDataid,a)})}}))}function cashOrderRedPackage(a){common.showLoad("正在加载..."),$.ajax({url:common.getBaseUrl()+"redEnve/cashOrderRedPackage.do?orderId="+a,type:"post",dataType:"json",error:function(a){common.hideLoad(),common.tips("系统异常，请稍后再试")},success:function(a){common.hideLoad(),"1"==a.status?common.G(common.getBaseUrl()+"new2016/index/userAccount.jsp"):"4"==a.status?common.tips("抽奖服务异常，请稍后再试"):"3"==a.status?common.tips("抽奖服务异常，请稍后再试"):"12"==a.status?common.tips("没有找到中奖记录"):common.tips(a.msgs)}})}function getUserAccounts(){$.ajax({url:common.getBaseUrl()+"redAcount/getUserAccounts.do",type:"post",async:!1,dataType:"json",error:function(a){common.tips("系统异常，请稍后再试")},success:function(a){$("#allMoneyTXT").html(a.allMoney);var b=$("#bgimgUrl").val(),c="",d="";$.each(a.resultSet,function(a,e){if(3>a){var f=createBtnStr(e);c+='<li><img src="'+common.getImgUrl()+"/fuliclient"+b+'"><div class="left-icon"><img src="'+common.getImgUrl()+"/fuliclient"+e.SMALL_IMG+'"></div><div class="hb-items-text"><div class="text">'+e.RESOURCE_NAME+'</div></div><div class="btn-wrap"><div class="btn-wrap-con text-center">'+f+"</div></div></li>"}else{var f=createBtnStr(e);d+='<li><img src="'+common.getImgUrl()+"/fuliclient"+b+'"><div class="left-icon"><img src="'+common.getImgUrl()+"/fuliclient"+e.SMALL_IMG+'"></div><div class="hb-items-text"><div class="text">'+e.RESOURCE_NAME+'</div></div><div class="btn-wrap"><div class="btn-wrap-con text-center">'+f+"</div></div></li>"}}),$("#all-hb-list").append(d),$("#userAccountsList").append(c)}})}function createBtnStr(a){var b="";return 3==a.RESOURCE_TYPE?b+="0"==a.IS_EXCHANGE?'<span class="img"><img src="'+common.getBaseUrl()+'new2016/images/btn_djsy.png" alt="点击使用" onClick="dianJiLingQu(\''+a.ID+"')\"></span>":'<span class="img"><img src="'+common.getBaseUrl()+'new2016/images/btn_ylq.png" alt="已领取"></span>':1==a.RESOURCE_TYPE?(b+='<span class="white fem-15">￥'+a.MONEY_NUMBER+"</span>",b+="0"==a.IS_EXCHANGE?'<span class="img"><img src="'+common.getBaseUrl()+'new2016/images/btn_djlq.png" alt="点击使用" onClick="dianJiLingQu(\''+a.ID+"')\"></span>":'<span class="img"><img src="'+common.getBaseUrl()+'new2016/images/btn_ylq.png" alt="已领取"></span>'):2==a.RESOURCE_TYPE&&(b+="0"==a.IS_EXCHANGE?'<span class="img"><img src="'+common.getBaseUrl()+'new2016/images/btn_djsy.png" alt="点击使用" onClick="dianJiLingQu(\''+a.ID+"')\"></span>":'<span class="img"><img src="'+common.getBaseUrl()+'new2016/images/btn_ylq.png" alt="已领取"></span>'),b}function getUserAccountsAdv(){$.ajax({url:common.getBaseUrl()+"redAcount/getUserAccountsAdv.do",type:"post",dataType:"json",error:function(a){common.tips("系统异常，请稍后再试")},success:function(a){var b=$("#bgimgUrl").val();if("1"==a.isShow&&a.resultSet.length>0){var c='<div class="big-fixed-box"><a href="javascript:" class="bfb-close bg-cover" onClick="common.hideLayer()"></a>';if(a.resultSet.length>=3){var d=a.resultSet[0],e=a.resultSet[1],f=a.resultSet[2];c+='<div class="block_1"><div class="pd1em"><img src="'+common.getImgUrl()+"/fuliclient"+d.PERSONAL_ADB+'"></div><div class="text-center more-tips-btn pl-1em pr-1em"><a href="javascript" class="tips-btn" onClick="sysGo(\''+d.PERSONAL_URL+'\')"><img src="'+common.getBaseUrl()+'new2016/images/btn_0426.png"></a><a href="javascript" class="tips-btn tipsBtnChange" onClick="$(this).parent().parent().hide().next().show()"><img src="'+common.getBaseUrl()+'new2016/images/box_btn_12.png"></a></div></div>',c+='<div class="block_2 hide"><div class="pd1em"><img src="'+common.getImgUrl()+"/fuliclient"+e.PERSONAL_ADB+'"></div><div class="text-center more-tips-btn pl-1em pr-1em"><a href="javascript" class="tips-btn" onClick="sysGo(\''+e.PERSONAL_URL+'\')"><img src="'+common.getBaseUrl()+'new2016/images/btn_0426.png"></a><a href="javascript" class="tips-btn tipsBtnChange" onClick="$(this).parent().parent().hide().next().show()"><img src="'+common.getBaseUrl()+'new2016/images/box_btn_12.png"></a></div></div>',c+='<div class="block_3 hide"><div class="pd1em"><img src="'+common.getImgUrl()+"/fuliclient"+f.PERSONAL_ADB+'"></div><div class="text-center more-tips-btn pl-1em pr-1em"><a href="javascript" class="tips-btn" onClick="sysGo(\''+f.PERSONAL_URL+'\')"><img src="'+common.getBaseUrl()+'new2016/images/btn_0426.png"></a><a href="javascript" class="tips-btn tipsBtnChange" onClick="common.hideLayer()"><img src="'+common.getBaseUrl()+'new2016/images/box_btn_13.png"></a></div></div>'}else if(a.resultSet.length>=2){var d=a.resultSet[0],e=a.resultSet[1];c+='<div class="block_1"><div class="pd1em"><img src="'+common.getImgUrl()+"/fuliclient"+d.PERSONAL_ADB+'"></div><div class="text-center more-tips-btn pl-1em pr-1em"><a href="javascript" class="tips-btn" onClick="sysGo(\''+d.PERSONAL_URL+'\')"><img src="'+common.getBaseUrl()+'new2016/images/btn_0426.png"></a><a href="javascript" class="tips-btn tipsBtnChange" onClick="$(this).parent().parent().hide().next().show()"><img src="'+common.getBaseUrl()+'new2016/images/box_btn_12.png"></a></div></div>',c+='<div class="block_2 hide"><div class="pd1em"><img src="'+common.getImgUrl()+"/fuliclient"+e.PERSONAL_ADB+'"></div><div class="text-center more-tips-btn pl-1em pr-1em"><a href="javascript" class="tips-btn" onClick="sysGo(\''+e.PERSONAL_URL+'\')"><img src="'+common.getBaseUrl()+'new2016/images/btn_0426.png"></a><a href="javascript" class="tips-btn tipsBtnChange" onClick="common.hideLayer()"><img src="'+common.getBaseUrl()+'new2016/images/box_btn_13.png"></a></div></div>'}else if(a.resultSet.length>=1){var g=a.resultSet[0];c+='<div class="block_1"><div class="pd1em"><img src="'+common.getImgUrl()+"/fuliclient"+g.PERSONAL_ADB+'"></div><div class="text-center more-tips-btn pl-1em pr-1em"><a href="javascript" class="tips-btn" onClick="sysGo(\''+g.PERSONAL_URL+'\')"><img src="'+common.getBaseUrl()+'new2016/images/btn_0426.png"></a><a href="javascript" class="tips-btn tipsBtnChange" onClick="common.hideLayer()"><img src="'+common.getBaseUrl()+'new2016/images/box_btn_13.png"></a></div></div>'}c+="</div>",$("#big-fixed-box").append(c),common.showLayer("#big-fixed-box",!0,function(){},!0,!1,!1)}var h="";$.each(a.resultSet,function(a,c){h+='<li><img src="'+common.getImgUrl()+"/fuliclient"+b+'"><div class="left-icon"><img src="'+common.getImgUrl()+"/fuliclient"+c.PERSONAL_ADS+'"></div><div class="hb-items-text"><div class="text">'+c.NAME+'</div></div><div class="btn-wrap"><div class="btn-wrap-con text-center"><div class="btn_text white" onClick="sysGo(\''+c.PERSONAL_URL+"')\">"+c.BUTTON_DESCRIBE+"</div></div></div></li>"}),$("#userAccountsAdvList").append(h)}})}function sysGo(a){common.G(a)}this.ShareJson={},define([common.getBaseUrl()+"new2016/js/"+SCRIPT_PATH+"/model/weChat/merchandiseShare",common.getBaseUrl()+"new2016/js/"+SCRIPT_PATH+"/model/weChat/wechatEvent"],function(require){function a(){d.shareFun.shareLineTime(ShareJson)}var b=$("#isShare").val();if("0"==b){var c=require(sys.getBaseUrl()+"new2016/js/"+SCRIPT_PATH+"/model/weChat/merchandiseShare");c.weChatShare.ready(!1,!0)}else{var c=require(sys.getBaseUrl()+"new2016/js/"+SCRIPT_PATH+"/model/weChat/merchandiseShare"),d=require(sys.getBaseUrl()+"new2016/js/"+SCRIPT_PATH+"/model/weChat/wechatEvent");getShareUrl(),c.weChatShare.ready(a,!0)}getUserAccounts(),getAccountAdvcycle(),getUserAccountsAdv()});var tempDataid=null;