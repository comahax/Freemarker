define(["zepto"],function(require,exports,module){!function($){$.alerts={verticalOffset:-100,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:.6,overlayColor:"#000",cancelButton:"取消",dialogClass:null,alert:function(a,b,c,d){null==b&&(b="Alert"),null==c&&(c="确定"),$.alerts._show(c,b,a,null,"alert",function(a){d&&d(a)})},confirm:function(a,b,c,d){null==b&&(b="Confirm"),null==c&&(c="确定"),$.alerts._show(c,b,a,null,"confirm",function(a){d&&d(a)})},confirmCancle:function(a,b,c,d){null==b&&(b="Confirm"),null==c&&(c="确定"),$.alerts._show(c,b,a,null,"confirmCancle",function(a){d&&d(a)})},prompt:function(a,b,c,d,e){null==c&&(c="Prompt"),null==d&&(d="确定"),$.alerts._show(d,c,a,b,"prompt",function(a){e&&e(a)})},_show:function(a,b,c,d,e,f){$.alerts._hide(),$.alerts._overlay("show"),$("BODY").append('<div id="popup_container"><h1 id="popup_title"></h1><div id="popup_content"><div id="popup_message"></div></div></div>'),$.alerts.dialogClass&&$("#popup_container").addClass($.alerts.dialogClass);var g="fixed";switch($("#popup_container").css({position:g,zIndex:99999,padding:0,margin:0}),$("#popup_title").text(b),$("#popup_content").addClass(e),$("#popup_message").text(c),$("#popup_message").html($("#popup_message").text().replace(/\n/g,"<br />")),$("#popup_container").css({minWidth:$("#popup_container").width(),maxWidth:$("#popup_container").width()}),$.alerts._reposition(),$.alerts._maintainPosition(!0),e){case"alert":$("#popup_message").after('<div id="popup_panel"><a id="popup_ok" class="alertbtn">'+a+"</a></div>"),$("#popup_ok").click(function(){$.alerts._hide(),f(!0)}),$("#popup_ok").focus().keypress(function(a){(13==a.keyCode||27==a.keyCode)&&$("#popup_ok").trigger("click")});break;case"confirm":$("#popup_message").after('<div id="popup_panel"><a id="popup_cancel" class="conf btncl">'+$.alerts.cancelButton+'</a><a id="popup_ok" class="conf">'+a+"</a></div>"),$("#popup_ok").click(function(){$.alerts._hide(),f&&f(!0)}),$("#popup_cancel").click(function(){$.alerts._hide()}),$("#popup_ok").focus(),$("#popup_ok, #popup_cancel").keypress(function(a){13==a.keyCode&&$("#popup_ok").trigger("click"),27==a.keyCode&&$("#popup_cancel").trigger("click")});break;case"prompt":$("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" />').after('<div id="popup_panel"><a id="popup_cancel" class="conf btncl">'+$.alerts.cancelButton+'</a><a id="popup_ok" class="conf">'+a+"</a></div>"),$("#popup_prompt").width($("#popup_message").width()),$("#popup_ok").click(function(){var a=$("#popup_prompt").val();$.alerts._hide(),f&&f(a)}),$("#popup_cancel").click(function(){$.alerts._hide()}),$("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(a){13==a.keyCode&&$("#popup_ok").trigger("click"),27==a.keyCode&&$("#popup_cancel").trigger("click")}),d&&$("#popup_prompt").val(d),$("#popup_prompt").focus().select();break;case"confirmCancle":$("#popup_message").after('<div id="popup_panel"><a id="popup_cancel" class="conf btncl">'+$.alerts.cancelButton+'</a><a id="popup_ok" class="conf">'+a+"</a></div>"),$("#popup_ok").click(function(){$.alerts._hide(),f&&f(!0)}),$("#popup_cancel").click(function(){$.alerts._hide(),f&&f(!1)}),$("#popup_ok").focus(),$("#popup_ok, #popup_cancel").keypress(function(a){13==a.keyCode&&$("#popup_ok").trigger("click"),27==a.keyCode&&$("#popup_cancel").trigger("click")})}},_hide:function(){$("#popup_container").remove(),$.alerts._overlay("hide"),$.alerts._maintainPosition(!1)},_overlay:function(a){switch(a){case"show":$.alerts._overlay("hide"),$("BODY").append('<div id="popup_overlay"></div>'),$("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:$(document).height(),background:$.alerts.overlayColor,opacity:$.alerts.overlayOpacity});break;case"hide":$("#popup_overlay").remove()}},_reposition:function(){var a=$(window).width()/2-$("#popup_container").width()/2+$.alerts.horizontalOffset;top<0&&(top=0),0>a&&(a=0),$("#popup_container").css({marginTop:-$("#popup_container").height()/2+"px",left:a+"px"}),$("#popup_overlay").height($(document).height())},_maintainPosition:function(a){if($.alerts.repositionOnResize)switch(a){case!0:$(window).bind("resize",$.alerts._reposition);break;case!1:$(window).unbind("resize",$.alerts._reposition)}}},module.exports={tfAlert:function(a,b,c,d){$.alerts.alert(a,b,c,d)},tfConfirm:function(a,b,c,d){$.alerts.confirm(a,b,c,d)},tfConfirmCancle:function(a,b,c,d){$.alerts.confirmCancle(a,b,c,d)},tfPrompt:function(a,b,c,d,e){$.alerts.prompt(a,b,c,d,e)}}}($)});