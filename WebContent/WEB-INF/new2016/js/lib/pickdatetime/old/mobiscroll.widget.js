!function($,a,b,c){var d,e,f=$.extend,g=$.mobiscroll,h=g.instances,i=g.userdef,j=g.util,k=j.jsPrefix,l=j.has3d,m=j.getCoord,n=j.constrain,o=j.isString,p=/android [1-3]/i.test(navigator.userAgent),q="webkitAnimationEnd animationend",r=function(){},s=function(a){a.preventDefault()};g.classes.Widget=function(j,t,u){function v(a){N&&N.removeClass("dwb-a"),N=$(this),N.hasClass("dwb-d")||N.hasClass("dwb-nhl")||N.addClass("dwb-a"),"mousedown"===a.type&&$(b).on("mouseup",w)}function w(a){N&&(N.removeClass("dwb-a"),N=null),"mouseup"===a.type&&$(b).off("mouseup",w)}function x(a){13==a.keyCode?da.select():27==a.keyCode&&da.cancel()}function y(a){a||J.focus(),da.ariaMessage(X.ariaMessage)}function z(a){var b,f,i,j=X.focusOnClose;G.remove(),d&&!a&&setTimeout(function(){if(j===c||j===!0){e=!0,b=d[0],i=b.type,f=b.value;try{b.type="button"}catch(a){}d.focus(),b.type=i,b.value=f}else j&&(h[$(j).attr("id")]&&(g.tapped=!1),$(j).focus())},200),da._isVisible=!1,C("onHide",[])}function A(a){clearTimeout(ga[a.type]),ga[a.type]=setTimeout(function(){var b="scroll"==a.type;(!b||Y)&&da.position(!b)},200)}function B(a){g.tapped||(a&&a(),$(b.activeElement).is("input,textarea")&&$(b.activeElement).blur(),d=ea,da.show()),setTimeout(function(){e=!1},300)}function C(a,b){var c;return b.push(da),$.each([i,_,V,t],function(d,e){e&&e[a]&&(c=e[a].apply(j,b))}),c}var D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,aa,ba,ca,da=this,ea=$(j),fa=[],ga={};da.position=function(a){var d,e,f,g,h,i,j,k,l,m,o,p,q,r,s,t,u=0,v=0,w={},x=Math.min(K[0].innerWidth||K.innerWidth(),I.width()),y=K[0].innerHeight||K.innerHeight();ba===x&&ca===y&&a||W||((da._isFullScreen||/top|bottom/.test(X.display))&&J.width(x),C("onPosition",[G,x,y])!==!1&&Q&&(s=K.scrollLeft(),t=K.scrollTop(),g=X.anchor===c?ea:$(X.anchor),da._isLiquid&&"liquid"!==X.layout&&(400>x?G.addClass("dw-liq"):G.removeClass("dw-liq")),!da._isFullScreen&&/modal|bubble/.test(X.display)&&(L.width(""),$(".mbsc-w-p",G).each(function(){d=$(this).outerWidth(!0),u+=d,v=d>v?d:v}),d=u>x?v:u,L.width(d).css("white-space",u>x?"":"nowrap")),S=da._isFullScreen?x:J.outerWidth(),T=da._isFullScreen?y:J.outerHeight(!0),Y=y>=T&&x>=S,da.scrollLock=Y,"modal"==X.display?(e=Math.max(0,s+(x-S)/2),f=t+(y-T)/2):"bubble"==X.display?(r=!0,m=$(".dw-arrw-i",G),j=g.offset(),k=Math.abs(E.offset().top-j.top),l=Math.abs(E.offset().left-j.left),h=g.outerWidth(),i=g.outerHeight(),e=n(l-(J.outerWidth(!0)-h)/2,s+3,s+x-S-3),f=k-T,t>f||k>t+y?(J.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),f=k+i):J.removeClass("dw-bubble-bottom").addClass("dw-bubble-top"),o=m.outerWidth(),p=n(l+h/2-(e+(S-o)/2),0,o),$(".dw-arr",G).css({left:p})):(e=s,"top"==X.display?f=t:"bottom"==X.display&&(f=t+y-T)),f=0>f?0:f,w.top=f,w.left=e,J.css(w),I.height(0),q=Math.max(f+T,"body"==X.context?$(b).height():E[0].scrollHeight),I.css({height:q}),r&&(f+T>t+y||k>t+y)&&(W=!0,setTimeout(function(){W=!1},300),K.scrollTop(Math.min(f+T-y,q-y))),ba=x,ca=y))},da.attachShow=function(a,b){fa.push(a),"inline"!==X.display&&(Z&&a.on("mousedown.dw",function(a){a.preventDefault()}),X.showOnFocus&&a.on("focus.dw",function(){e||B(b)}),X.showOnTap&&da.tap(a,function(){B(b)}))},da.select=function(){Q&&da.hide(!1,"set")===!1||(da._fillValue(),C("onSelect",[da._value]))},da.cancel=function(){Q&&da.hide(!1,"cancel")===!1||C("onCancel",[da._value])},da.clear=function(){C("onClear",[G]),Q&&!da.live&&da.hide(!1,"clear"),da.setValue(null,!0)},da.enable=function(){X.disabled=!1,da._isInput&&ea.prop("disabled",!1)},da.disable=function(){X.disabled=!0,da._isInput&&ea.prop("disabled",!0)},da.show=function(b,d){var e;X.disabled||da._isVisible||(O!==!1&&("top"==X.display&&(O="slidedown"),"bottom"==X.display&&(O="slideup")),da._readValue(),C("onBeforeShow",[]),e='<div lang="'+X.lang+'" class="mbsc-'+X.theme+(X.baseTheme?" mbsc-"+X.baseTheme:"")+" dw-"+X.display+" "+(X.cssClass||"")+(da._isLiquid?" dw-liq":"")+(p?" mbsc-old":"")+(P?"":" dw-nobtn")+'"><div class="dw-persp">'+(Q?'<div class="dwo"></div>':"")+"<div"+(Q?' role="dialog" tabindex="-1"':"")+' class="dw'+(X.rtl?" dw-rtl":" dw-ltr")+'">'+("bubble"===X.display?'<div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div>':"")+'<div class="dwwr"><div aria-live="assertive" class="dw-aria dw-hidden"></div>'+(X.headerText?'<div class="dwv">'+(o(X.headerText)?X.headerText:"")+"</div>":"")+'<div class="dwcc">',e+=da._generateContent(),e+="</div>",P&&(e+='<div class="dwbc">',$.each(M,function(a,b){b=o(b)?da.buttons[b]:b,"set"===b.handler&&(b.parentClass="dwb-s"),"cancel"===b.handler&&(b.parentClass="dwb-c"),b.handler=o(b.handler)?da.handlers[b.handler]:b.handler,e+="<div"+(X.btnWidth?' style="width:'+100/M.length+'%"':"")+' class="dwbw '+(b.parentClass||"")+'"><div tabindex="0" role="button" class="dwb'+a+" dwb-e "+(b.cssClass===c?X.btnClass:b.cssClass)+(b.icon?" mbsc-ic mbsc-ic-"+b.icon:"")+'">'+(b.text||"")+"</div></div>"}),e+="</div>"),e+="</div></div></div></div>",G=$(e),I=$(".dw-persp",G),H=$(".dwo",G),L=$(".dwwr",G),F=$(".dwv",G),J=$(".dw",G),D=$(".dw-aria",G),da._markup=G,da._header=F,da._isVisible=!0,U="orientationchange resize",da._markupReady(),C("onMarkupReady",[G]),Q?($(a).on("keydown",x),X.scrollLock&&G.on("touchmove mousewheel DOMMouseScroll",function(a){Y&&a.preventDefault()}),"Moz"!==k&&$("input,select,button",E).each(function(){this.disabled||$(this).addClass("dwtd").prop("disabled",!0)}),U+=" scroll",g.activeInstance=da,G.appendTo(E),l&&O&&!b&&G.addClass("dw-in dw-trans").on(q,function(){G.off(q).removeClass("dw-in dw-trans").find(".dw").removeClass("dw-"+O),y(d)}).find(".dw").addClass("dw-"+O)):ea.is("div")?ea.html(G):G.insertAfter(ea),C("onMarkupInserted",[G]),da.position(),K.on(U,A),G.on("selectstart mousedown",s).on("click",".dwb-e",s).on("keydown",".dwb-e",function(a){32==a.keyCode&&(a.preventDefault(),a.stopPropagation(),$(this).click())}),setTimeout(function(){$.each(M,function(a,b){da.tap($(".dwb"+a,G),function(a){b=o(b)?da.buttons[b]:b,b.handler.call(this,a,da)},!0)}),X.closeOnOverlay&&da.tap(H,function(){da.cancel()}),Q&&!O&&y(d),G.on("touchstart mousedown",".dwb-e",v).on("touchend",".dwb-e",w),da._attachEvents(G)},300),C("onShow",[G,da._tempValue]))},da.hide=function(b,c,d){return!da._isVisible||!d&&!da._isValid&&"set"==c||!d&&C("onClose",[da._tempValue,c])===!1?!1:(G&&("Moz"!==k&&$(".dwtd",E).each(function(){$(this).prop("disabled",!1).removeClass("dwtd")}),l&&Q&&O&&!b&&!G.hasClass("dw-trans")?G.addClass("dw-out dw-trans").find(".dw").addClass("dw-"+O).on(q,function(){z(b)}):z(b),K.off(U,A)),void(Q&&($(a).off("keydown",x),delete g.activeInstance)))},da.ariaMessage=function(a){D.html(""),setTimeout(function(){D.html(a)},100)},da.isVisible=function(){return da._isVisible},da.setValue=r,da._generateContent=r,da._attachEvents=r,da._readValue=r,da._fillValue=r,da._markupReady=r,da._processSettings=r,da.tap=function(a,b,c){var d,e,f;X.tap&&a.on("touchstart.dw",function(a){c&&a.preventDefault(),d=m(a,"X"),e=m(a,"Y"),f=!1}).on("touchmove.dw",function(a){(Math.abs(m(a,"X")-d)>20||Math.abs(m(a,"Y")-e)>20)&&(f=!0)}).on("touchend.dw",function(a){var c=this;f||(a.preventDefault(),b.call(c,a)),g.tapped=!0,setTimeout(function(){g.tapped=!1},500)}),a.on("click.dw",function(a){g.tapped||b.call(this,a),a.preventDefault()})},da.option=function(a,b){var c={};"object"==typeof a?c=a:c[a]=b,da.init(c)},da.destroy=function(){da.hide(!0,!1,!0),$.each(fa,function(a,b){b.off(".dw")}),da._isInput&&Z&&(j.readOnly=aa),C("onDestroy",[]),delete h[j.id],da=null},da.getInst=function(){return da},da.trigger=C,da.init=function(b){da.settings=X={},f(t,b),f(X,g.defaults,da._defaults,i,t),_=g.themes[X.theme]||g.themes.mobiscroll,R=g.i18n[X.lang],C("onThemeLoad",[R,t]),f(X,_,R,i,t),V=g.presets[da._class][X.preset],X.buttons=X.buttons||("inline"!==X.display?["cancel","set"]:[]),X.headerText=X.headerText===c?"inline"!==X.display?"{value}":!1:X.headerText,V&&(V=V.call(j,da),f(X,V,t)),g.themes[X.theme]||(X.theme="mobiscroll"),da._isLiquid="liquid"===(X.layout||(/top|bottom/.test(X.display)?"liquid":"")),da._processSettings(),ea.off(".dw"),O=p?!1:X.animate,M=X.buttons,Q="inline"!==X.display,Z=X.showOnFocus||X.showOnTap,K=$("body"==X.context?a:X.context),E=$(X.context),da.context=K,da.live=!0,$.each(M,function(a,b){return"set"===b||"set"===b.handler?(da.live=!1,!1):void 0}),da.buttons.set={text:X.setText,handler:"set"},da.buttons.cancel={text:da.live?X.closeText:X.cancelText,handler:"cancel"},da.buttons.clear={text:X.clearText,handler:"clear"},da._isInput=ea.is("input"),P=M.length>0,da._isVisible&&da.hide(!0,!1,!0),Q?(da._readValue(),da._isInput&&Z&&(aa===c&&(aa=j.readOnly),j.readOnly=!0),da.attachShow(ea)):da.show(),ea.on("change.dw",function(){da._preventChange||da.setVal(ea.val(),!0,!1),da._preventChange=!1}),C("onInit",[])},da.buttons={},da.handlers={set:da.select,cancel:da.cancel,clear:da.clear},da._value=null,da._isValid=!0,da._isVisible=!1,u||(h[j.id]=da,da.init(t))},g.classes.Widget.prototype._defaults={lang:"en",setText:"Set",selectedText:"Selected",closeText:"Close",cancelText:"Cancel",clearText:"Clear",disabled:!1,closeOnOverlay:!0,showOnFocus:!0,showOnTap:!0,display:"modal",scrollLock:!0,tap:!0,btnClass:"dwb",btnWidth:!0,focusOnClose:!1},g.themes.mobiscroll={rows:5,showLabel:!1,headerText:!1,btnWidth:!1,selectedLineHeight:!0,selectedLineBorder:1,dateOrder:"MMddyy",weekDays:"min",checkIcon:"ion-ios7-checkmark-empty",btnPlusClass:"mbsc-ic mbsc-ic-arrow-down5",btnMinusClass:"mbsc-ic mbsc-ic-arrow-up5",btnCalPrevClass:"mbsc-ic mbsc-ic-arrow-left5",btnCalNextClass:"mbsc-ic mbsc-ic-arrow-right5"},$(a).on("focus",function(){d&&(e=!0)}),$(b).on("mouseover mouseup mousedown click",function(a){return g.tapped?(a.stopPropagation(),a.preventDefault(),!1):void 0})}(jQuery,window,document);