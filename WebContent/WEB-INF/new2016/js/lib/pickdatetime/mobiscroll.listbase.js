!function($,a){var b=$.mobiscroll,c={invalid:[],showInput:!0,inputClass:""};b.presets.scroller.list=function(b){function d(a,b,c,d){for(var f,g=0;b>g;){var h=$(".dwwl"+g,a),i=e(d,g,c);for(f=0;f<i.length;f++)$('.dw-li[data-val="'+i[f]+'"]',h).removeClass("dw-v");g++}}function e(a,b,c){for(var d,e=0,f=c,g=[];b>e;){var h=a[e];for(d in f)if(f[d].key==h){f=f[d].children;break}e++}for(e=0;e<f.length;)f[e].invalid&&g.push(f[e].key),e++;return g}function f(a,b){for(var c=[];a;)c[--a]=!0;return c[b]=!1,c}function g(a){var b,c=[];for(b=0;a>b;b++)c[b]=r.labels&&r.labels[b]?r.labels[b]:b;return c}function h(b,c,d){var e,f,g,h=0,k=[[]],l=C;if(c)for(e=0;c>e;e++)t?k[0][e]={}:k[e]=[{}];for(;h<b.length;){for(t?k[0][h]=j(l,D[h]):k[h]=[j(l,D[h])],e=0,g=a;e<l.length&&g===a;)l[e].key==b[h]&&(d!==a&&d>=h||d===a)&&(g=e),e++;if(g!==a&&l[g].children)h++,l=l[g].children;else{if(!(f=i(l))||!f.children)return k;h++,l=f.children}}return k}function i(a,b){if(!a)return!1;for(var c,d=0;d<a.length;)if(!(c=a[d++]).invalid)return b?d-1:c;return!1}function j(a,b){for(var c={keys:[],values:[],label:b},d=0;d<a.length;)c.values.push(a[d].value),c.keys.push(a[d].key),d++;return c}function k(a,b){$(".dwfl",a).css("display","").slice(b).hide()}function l(a){for(var b,c=[],d=a,e=!0,f=0;e;)b=i(d),c[f++]=b.key,e=b.children,e&&(d=e);return c}function m(b,c){var d,e,f,g=[],h=C,j=0,k=!1;if(b[j]!==a&&c>=j)for(d=0,e=b[j],f=a;d<h.length&&f===a;)h[d].key!=b[j]||h[d].invalid||(f=d),d++;else f=i(h,!0),e=h[f].key;for(k=f!==a?h[f].children:!1,g[j]=e;k;){if(h=h[f].children,j++,k=!1,f=a,b[j]!==a&&c>=j)for(d=0,e=b[j],f=a;d<h.length&&f===a;)h[d].key!=b[j]||h[d].invalid||(f=d),d++;else f=i(h,!0),f=f===!1?a:f,e=h[f].key;k=f!==a&&i(h[f].children)?h[f].children:!1,g[j]=e}return{lvl:j+1,nVector:g}}function n(c){var d=[];return x=x>y++?x:y,c.children("li").each(function(c){var e=$(this),f=e.clone();f.children("ul,ol").remove();var g=b._processMarkup?b._processMarkup(f):f.html().replace(/^\s\s*/,"").replace(/\s\s*$/,""),h=e.attr("data-invalid")?!0:!1,i={key:e.attr("data-val")===a||null===e.attr("data-val")?c:e.attr("data-val"),value:g,invalid:h,children:null},j=e.children("ul,ol");j.length&&(i.children=n(j)),d.push(i)}),y--,d}var o,p,q=$.extend({},b.settings),r=$.extend(b.settings,c,q),s=r.layout||(/top|bottom/.test(r.display)?"liquid":""),t="liquid"==s,u=r.readonly,v=$(this),w=this.id+"_dummy",x=0,y=0,z={},A=1,B=[],C=r.wheelArray||n(v),D=g(x),E=l(C),F=h(E,x);return $("#"+w).remove(),r.showInput&&(o=$('<input type="text" id="'+w+'" value="" class="'+r.inputClass+'" placeholder="'+(r.placeholder||"")+'" readonly />').insertBefore(v),r.anchor=o,b.attachShow(o)),r.wheelArray||v.hide().closest(".ui-field-contain").trigger("create"),{width:50,wheels:F,layout:s,headerText:!1,formatResult:function(a){return a.slice(0,A).join(" ")},parseValue:function(a){return a?(a+"").split(" "):(r.defaultValue||E).slice(0)},onBeforeShow:function(){var a=b.getArrayVal(!0);B=a.slice(0),r.wheels=h(a,x,x),p=!0},onValueFill:function(a){o&&o.val(a)},onShow:function(a){$(".dwwl",a).on("mousedown touchstart",function(){clearTimeout(z[$(".dwwl",a).index(this)])})},onDestroy:function(){o&&o.remove(),v.show()},validate:function(c,e,g){var i,j,l=[],n=b.getArrayVal(!0),o=(e||0)+1;if(e!==a&&B[e]!=n[e]||e===a&&!p){for(r.wheels=h(n,null,e),j=m(n,e===a?n.length:e),A=j.lvl,i=0;i<n.length;i++)n[i]=j.nVector[i]||0;for(;o<j.lvl;)l.push(o++);if(l.length)return r.readonly=f(x,e),clearTimeout(z[e]),z[e]=setTimeout(function(){p=!0,k(c,j.lvl),B=n.slice(0),b.changeWheel(l,e===a?g:0,e!==a),r.readonly=u},e===a?0:1e3*g),!1}else j=m(n,n.length),A=j.lvl;B=n.slice(0),d(c,j.lvl,C,n),k(c,j.lvl),p=!1}}}}(jQuery);